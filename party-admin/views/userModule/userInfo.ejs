<% include ../inc/header.ejs %>
<style>
    .date-table {
        overflow-y: auto;
    }
</style>

<% include ../inc/body.ejs %>
<!-- html主体代码 start -->
<div class="row">
    <div class="col-sm-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title" style="padding-top: 3px !important;">
                <div style="width: 140px; display: block;float: left;padding-top: 10px;">
                    用户信息列表
                </div>

            </div>
            <div class="ibox-content">
                <div class="input-group" style="width: 200px; display: flex" id="search-key">
                    <select required type="text" name="select-academyCode" id="select-academyCode" maxlength="20" class="form-control" placeholder="请选择学院"
                            style="min-width: 200px;width: 200px;height: 34px">

                    </select>
                    <input style="width: 200px;height:34px;" type="text" id="select-number" placeholder="请输入学工号"
                           class="input-sm form-control">



                    <span class="input-group-btn" style="float:left;flex: 4">
                            <button onclick="userInfo.select(this);" id="search_button" style="width: 50px;height:34px;" type="button"
                                    class="btn btn-sm btn-primary"> 搜索</button>
                        </span>
                </div>
            </div>
            <div class="ibox-content data-view" style="overflow-y: auto;">
                <div class="col-sm-12">
                    <div class=" col-sm-12 date-table">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th>序号</th>
                                <th>姓名</th>
                                <th>学号/工号</th>
                                <th>手机号</th>
                                <th>性别</th>
                                <th>民族代码</th>
                                <th>出生日期</th>
                                <th>籍贯</th>
                                <!-- <th>身份证</th>-->
                                <th>政治面貌</th>
                                <th>学院/部门</th>
                                <th>所属专业</th>
                                <th>所属班级</th>
                                <th>所属支部</th>
                                <th>在读状态</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody id="item-list">

                            </tbody>
                        </table>
                    </div>
                    <div class="col-sm-12 pages M-box3 list-page">
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<!-- html主体代码 end -->
<!-- 管理的用户基础信息模板 -->
<script id="userInfo-template" type="text/x-dot-template">
    {{ if(it.length == 0) { }}
    暂无数据
    {{ }else{ }}
    {{ for(var i=0;i < it.length;i++){ }}
    <tr>
        <td>
            {{= ((index-1) * size +i+1)}}
        </td>
        <td>
            {{= it[i].name||""}}
        </td>
        <td>
            {{= it[i].number||""}}
        </td>
        <td>
            {{= it[i].phone||""}}
        </td>
        <td>
            {{= helper.sex(it[i].sex)||"" }}
        </td>
        <td>
            {{= it[i].nationName||""}}
        </td>
        <td>
            {{= it[i].birthdayStr||""}}
        </td>
        <td>
            {{= it[i].originPlace||""}}
        </td>
        <!--
        <td>
            {{= it[i].idCard||""}}
        </td>-->
        <td>
            {{= helper.politicalOutlook(it[i].politicalOutlook)||"" }}
        </td>
        <td>
            {{= it[i].academyName||""}}
        </td>
        <td>
            {{= it[i].majorName||"" }}
        </td>
        <td>
            {{= it[i].myClass||""}}
        </td>
        <td>
            {{= it[i].departName||""}}
        </td>
        <td>
            {{= helper.studyStatus(it[i].studyStatus)||"" }}
        </td>
        <td>
            <div class="btn-group">
                <button data-toggle="dropdown" class="btn btn-primary btn-xs dropdown-toggle">操作 <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li>
                        <a href="#" data-id="{{= it[i].id}}" onclick="userInfo.info(this);">查看</a>
                    </li>
                    <li>
                        <a href="#" data-id="{{= it[i].id}}" onclick="userInfo.update(this);">修改</a>
                    </li>
                </ul>
            </div>
        </td>
    </tr>
    {{ } }}
    {{ } }}
</script>


<!-- 修改信息界面生成-->
<script id="baseInfo-template" type="text/x-dot-template">
    {{ if(it.length == 0) { }}
    暂无数据
    {{ }else{ }}

    <tr>
        <td width="100px" style="text-align: right;">
            姓名
        </td>
        <td>
            <input required type="text" name="name" id="name" tips-id="name-tips" data-type="name" data-length="20"
                   maxlength="20" onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的姓名" value="{{= it.name ||""}}">
        </td>
        <td class="form-item-remark" style="width: 40%">*<span style="color:black">必填</span> <span
                    id="name-tips"></span></td>

    </tr>

    <tr>
        <td width="100px" style="text-align: right;">
            曾用名
        </td>
        <td>
            <input type="text" name="oldName" id="oldName" tips-id="oldName-tips" data-type="name" data-length="20"
                   maxlength="20" onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的曾用名" value="{{= it.oldName ||''}}">
        </td>
        <td class="form-item-remark"><span id="oldName-tips"></span></td>

    </tr>

    <tr>
        <td width="100px" style="text-align: right;">
            学号/工号
        </td>
        <td>
            {{ if(it.number==""||it.number==null){ }}

            <input required type="text" name="number" id="number" tips-id="number-tips" data-length="20"
                   data-type="regnumber" maxlength="20" onblur="checkRegular(this);"
                   class="form-control" placeholder="请输入您的学号/工号"
                   value="{{= it.number||''}}">

            {{ }else{ }}

            <input required type="text" name="number" id="number" readonly="readonly" class="form-control"
                   value="{{= it.number||''}}">

            {{ }}}

        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="number-tips"></span></td>

    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            身份证
        </td>

        <td>
            <input required type="text" name="idCard" id="idCard" tips-id="idCard-tips" data-length="18"
                   data-type="idcard" maxlength="18" onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的身份证" value="{{= it.idCard ||''}}">
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="idCard-tips"></span></td>

    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            手机号
        </td>
        <td>
            <input required type="text" name="phone" id="phone" tips-id="phone-tips" data-type="phone" data-length="11"
                   maxlength="11" onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的手机号" value="{{= it.phone ||""}}">
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="phone-tips"></span></td>


    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            邮箱
        </td>
        <td>
            <input type="text" name="email" id="email" tips-id="email-tips" data-length="32" data-type="email"
                   maxlength="32" onblur="checkRegular(this);" class="form-control"
                   value="{{= it.email ||''}}">
        </td>
        <td class="form-item-remark"><span id="email-tips"></span></td>


    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            性别
        </td>
        <td>
            <select required type="text" maxlength="20" id="sex" tips-id="sex-tips" data-length="3"
                    onblur="checkRegular(this);" name="sex" class="form-control">
                <option value="">请选择性别</option>
                {{if(value=it.sex == 1){}}
                <option value="1" selected="selected">女</option>
                <option value="2">男</option>
                {{ }else if(value=it.sex == 2){ }}
                <option value="1">女</option>
                <option value="2" selected="selected">男</option>
                {{ }else{ }}
                <option value="1">女</option>
                <option value="2">男</option>
                {{ } }}
            </select>
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="sex-tips"></span></td>
    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            民族
        </td>
        <td>
            <select placeholder="请选择您的民族" required type="text" id="nationCode" name="nationCode" class="form-control"
                    tips-id="nationCode-tips" data-length="20" onblur="checkRegular(this);" value="{{= it.nationName ||""}}">

            </select>
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="nationCode-tips"></span></td>
    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            出生日期
        </td>
        <td>
            <input required type="text" name="birthday" id="birthdayStr" tips-id="birthday-tips"
                   value="{{= it.birthday ||""}}" maxlength="10" data-type="date" onblur="checkRegular(this);"
            class="form-control"
            placeholder="请输入您的出生日期">
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="birthday-tips"></span></td>

    </tr>

    <tr>
        <td width="100px" style="text-align: right;">
            出生地
        </td>
        <td>
            <input required type="text" name="birthPlace" id="birthPlace" tips-id="birthPlace-tips" data-type="address"
                   data-length="50" maxlength="20" onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的出生地" value="{{= it.birthPlace ||""}}">
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="birthPlace-tips"></span></td>

    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            现居住地
        </td>
        <td>
            <input required type="text" name="presentPesidence" id="presentPesidence" data-type="address"
                   tips-id="presentPesidence-tips" data-length="50" maxlength="20" onblur="checkRegular(this);"
                   class="form-control"
                   placeholder="请输入您的现居住地" value="{{= it.presentPesidence ||""}}">
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="presentPesidence-tips"></span></td>
    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            籍贯
        </td>
        <td>
            <input required type="text" name="originPlace" id="originPlace" tips-id="originPlace-tips"
                   data-type="address" data-length="50" maxlength="20" onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的籍贯" value="{{= it.originPlace||""}}">
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="originPlace-tips"></span></td>
    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            学历
        </td>
        <td>
            <input required type="text" name="graduate" id="graduate" tips-id="graduate-tips" data-type="chinese"
                   data-length="20" maxlength="20" onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的学历" value="{{= it.graduate||""}}"
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="graduate-tips"></span></td>

    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            学位或职称
        </td>
        <td>
            <input required type="text" name="degree" id="degree" tips-id="degree-tips" data-type="chinese"
                   data-length="20" maxlength="20" onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的学位或职称" value="{{= it.degree||""}}">
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="degree-tips"></span></td>

    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            国籍
        </td>
        <td>
            <select placeholder="请选择您的国籍" required name="nationality" id="nationality" value="{{= it.nationality}}"
                    tips-id="nationality-tips" data-length="3" onblur="checkRegular(this);" class="form-control">
                <option value="1">中国</option>
                <option value="2">海外</option>
            </select>
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="nationality-tips"></span></td>
    </tr>

    <tr>
        <td width="100px" style="text-align: right;">
            特长
        </td>

        <td>
            <input type="text" name="specialty" id="specialty" tips-id="specialty-tips" data-length="50" maxlength="20"
                   onblur="checkRegular(this);" class="form-control"
                   placeholder="请输入您的特长" value="{{= it.specialty||""}}">
        </td>
        <td class="form-item-remark"><span id="specialty-tips"></span></td>

    </tr>

    {{ } }}
</script>

<script id="detailInfo-template" type="text/x-dot-template">
    {{ if(it.length == 0) { }}
    暂无数据
    {{ }else{ }}
    {{ var i=0; }}

    <tr>
        <td width="100px" style="text-align: right;">
            学院/部门
        </td>
        <td>
            <select placeholder="请选择您的学院/部门" required type="text" name="academyCode" id="academyCode"
                    tips-id="academyCode-tips" data-length="20" onblur="checkRegular(this);" class="form-control"
                    value="{{= it.academyName}}" onchange="personalBaseInfo.getSyncByAcademyCode()">
            </select>
        </td>
        <td class="form-item-remark" style="width: 40%">*<span style="color:black">必填</span> <span
                    id="academyCode-tips"></span></td>
    </tr>


    <tr>
        <td width="100px" style="text-align: right;">
            所属专业
        </td>
        <td>
            <select placeholder="请选择您的所属专业" required type="text" maxlength="20" name="majorCode" id="majorCode"
                    tips-id="majorCode-tips" data-length="20" onblur="checkRegular(this);" class="form-control">
                <option value="">请选择专业</option>
            </select>
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="majorCode-tips"></span></td>

    </tr>

    <tr>
        <td width="100px" style="text-align: right;">
            所属支部
        </td>
        <td>
            <select placeholder="请选择您的所属支部" required type="text" maxlength="20" name="departCode" id="departCode"
                    tips-id="departCode-tips" data-length="20" onblur="checkRegular(this);" class="form-control">
                <option value="">请选择支部</option>
            </select>
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="departCode-tips"></span></td>

    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            班级
        </td>
        <td>
            <input required type="text" tips-id="myClass-tips" data-type="class" data-length="20" maxlength="20"
                   onblur="checkRegular(this);" name="myClass" id="myClass" class="form-control" placeholder="请输入您的班级"
                   value="{{= it.myClass||""}}">
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="myClass-tips"></span></td>

    </tr>
    <tr>
        <td width="100px" style="text-align: right;">
            在读状态
        </td>
        <td>
            <select placeholder="请选择您的在读状态" required type="text" maxlength="20" name="studyStatus" id="studyStatus"
                    class="form-control" value="{{= it.studyStatus}}"
                    tips-id="studyStatus-tips" data-length="3" onblur="checkRegular(this);"
            >
                <option value="0">在读</option>
                <option value="1">已毕业</option>
            </select>
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="studyStatus-tips"></span></td>
        <td></td>
    </tr>
    <tr>
        <td class="form-item-title">
            政治面貌
        </td>
        <td>
            <select placeholder="请输入您的政治面貌" required name="politicalOutlook" id="politicalOutlook"
                    tips-id="politicalOutlook-tips" data-length="3" onblur="checkRegular(this);"
                    value="{{= it.politicalOutlook}}" class="form-control">
                <option value="1">群众</option>
                <option value="2">共青团员</option>
                <option value="3">共产党员</option>
            </select>
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span id="politicalOutlook-tips"></span></td>
    </tr>

    {{ } }}
</script>

<script id="departInfo-template" type="text/x-dot-template">

    <tr>
        <td width="100px" style="text-align: right;">
            学院/部门
        </td>
        <td>
            <select placeholder="请选择您的所在学院" required type="text" name="academyCode" id="academyCode"
                    class="form-control" value="{{= it.academyName}}"
                    onchange="personalBaseInfo.getSyncByAcademyCode()">
            </select>
        </td>
        <td class="form-item-remark" style="width: 40%">*<span style="color:black">必填</span></td>
    </tr>


    <tr>
        <td width="100px" style="text-align: right;">
            所属支部
        </td>
        <td>
            <select placeholder="请选择您的所在支部" required type="text" maxlength="20" name="departCode" id="departCode"
                    class="form-control">
                <option value="">请选择支部</option>
            </select>
        </td>
        <td class="form-item-remark">*<span style="color:black">必填</span> <span></span></td>

    </tr>
</script>


<script id="nation-template" type="text/x-dot-template">
    {{ if(it.length == 0) { }}
    <option value="">暂无数据</option>
    {{ }else{ }}
    <option value="">请选择民族</option>
    {{ for(var i = 0 ; i < it.length ; i++){ }}
    <option value="{{=it[i].code }}">{{=it[i].name }}</option>
    {{ } }}
    {{ } }}
</script>

<script id="academy-template" type="text/x-dot-template">

    {{ if(it.length == 0 ){ }}
    <option value="">暂无数据</option>
    {{ }else{ }}
    <option value="" selected="selected">请选择学院/部门</option>
    {{ for(var i = 0 ; i < it.length ; i++){ }}
    <option value="{{=it[i].code }}">{{=it[i].name }}</option>
    {{ } }}
    {{ } }}
</script>

<script id="major-template" type="text/x-dot-template">
    {{ if(it.length == 0 ){ }}
    <option value="">暂无数据</option>
    {{ }else{ }}
    <option value="" selected="selected">请选择专业</option>
    {{ for(var i = 0 ; i < it.length ; i++){ }}
    <option value="{{=it[i].code }}">{{=it[i].name }}</option>
    {{ } }}
    {{ } }}
</script>


<script id="depart-template" type="text/x-dot-template">
    {{ if(it.length == 0 ){ }}
    <option value="">暂无数据</option>
    {{ }else{ }}
    <option value="" selected="selected">请选择党支部</option>
    {{ for(var i = 0 ; i < it.length ; i++){ }}
    <option value="{{=it[i].code }}">{{=it[i].name }}</option>
    {{ } }}
    {{ } }}
</script>

<% include ../inc/js.ejs %>

<!-- 私有脚本 start -->
<script src="../../js/userModule/_userInfo.js"></script>
<!-- 私有脚本 end -->
<% include ../inc/footer.ejs %>